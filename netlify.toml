# netlify.toml（最終・Netlify内で完結）

[build]
  command = "bash -lc 'set -euo pipefail; corepack enable; corepack prepare yarn@4.4.0 --activate; echo node:$(node -v) yarn:$(yarn -v); YARN_ENABLE_IMMUTABLE_INSTALLS=false yarn install; yarn bootstrap; cd website-gatsby; YARN_ENABLE_IMMUTABLE_INSTALLS=false yarn install; yarn build --verbose'"
  publish = "website-gatsby/public"

[build.environment]
  NODE_VERSION = "18"
  NODE_OPTIONS = "--max_old_space_size=4096"
  # MapboxAccessToken は Netlify の UI（Environment variables）で必ず設定
